<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat√°logo - LeskChamps</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="estilo.css">
</head>
<body>
    <!-- NAVBAR -->
    <navbar>
        <div class="navbar-container">
            <div class="logo">
                <i class="fas fa-shopping-bag"></i> LeskChamps
            </div>
            <div class="nav-links">
                <a href="index.html">Inicio</a>
                <a href="catalog.html">Cat√°logo</a>
                <a href="boots.html">Botines</a>
                <a href="jerseys.html">Remeras</a>
                <a href="perfumes.html">Perfumes</a>
                <a href="casual.html">Casual</a>
                <div class="cart-icon" id="cartIcon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </div>
            </div>
        </div>
    </navbar>

    <!-- HERO SECTION -->
    <section class="hero">
        <div class="hero-bg">
            <img src="https://images.unsplash.com/photo-1767397194546-c51509f4a715?crop=entropy&w=1920" alt="Cat√°logo">
        </div>
        <div class="hero-content">
            <h1 class="fade-in">Cat√°logo <span class="highlight">Completo</span></h1>
            <p class="fade-in-delay">Todos nuestros productos en un solo lugar.</p>
            <div class="hero-buttons">
                <a href="#productos" class="btn-primary">
                    Ver Productos <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </section>

    <!-- CATEGOR√çAS -->
    <div class="categories-nav">
        <button class="category-btn active" data-filter="todos">Todos</button>
        <button class="category-btn" data-filter="calzado">Botines</button>
        <button class="category-btn" data-filter="perfumes">Perfumes</button>
        <button class="category-btn" data-filter="futbol">Remeras F√∫tbol</button>
        <button class="category-btn" data-filter="remeras">Remeras</button>
    </div>

    <!-- PRODUCTOS -->
    <section class="section" id="productos">
        <h2 class="section-title">Todos los Productos</h2>
        <div class="products-grid" id="productsGrid"></div>
    </section>

    <!-- CARRITO MODAL -->
    <div class="cart-modal" id="cartModal">
        <div class="cart-content">
            <div class="cart-header">
                <h2>Carrito</h2>
                <button class="close-cart" id="closeCart">&times;</button>
            </div>
            <div class="cart-items" id="cartItems"></div>
            <div class="cart-footer">
                <div class="cart-total">
                    <span>Total:</span>
                    <span id="cartTotal">$0</span>
                </div>
                <button class="checkout-btn" id="checkoutBtn">
                    <i class="fab fa-whatsapp"></i> Comprar
                </button>
            </div>
        </div>
    </div>

    <!-- MODAL DE PRODUCTO AMPLIADO -->
    <div class="product-modal" id="productModal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <div class="modal-image-container" id="modalImageContainer"></div>
            <div class="modal-dots" id="modalDots"></div>
            <div class="modal-info">
                <div class="modal-category" id="modalCategory"></div>
                <h2 class="modal-name" id="modalName"></h2>
                <p class="modal-description" id="modalDescription"></p>
                <div class="modal-price" id="modalPrice"></div>
                <div class="modal-action-buttons">
                    <button class="modal-add-btn" id="modalAddBtn">
                        <i class="fas fa-plus"></i> Agregar
                    </button>
                    <button class="modal-close-btn" id="modalCloseBtn">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer id="contacto">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Sobre LeskChamps</h3>
                <p>Somos una tienda dedicada a ofrecer productos de calidad en calzado, perfumes y moda deportiva.</p>
            </div>
            <div class="footer-section">
                <h3>Contacto</h3>
                <p><i class="fas fa-phone"></i> +598 92 037 792</p>
                <p><i class="fas fa-envelope"></i> leskchamps@gmail.com</p>
                <p><i class="fas fa-map-marker-alt"></i> Uruguay</p>
            </div>
            <div class="footer-section">
                <h3>S√≠guenos</h3>
                <div class="social-links">
                    <a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
                    <a href="https://facebook.com" target="_blank"><i class="fab fa-facebook"></i></a>
                    <a href="https://whatsapp.com" target="_blank"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 LeskChamps. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Importar productos desde archivo externo -->
    <script src="products.js"></script>
    <script>
        let cart = [];
        let currentFilter = 'todos';

        // DOM Elements
        const cartIcon = document.getElementById('cartIcon');
        const cartModal = document.getElementById('cartModal');
        const closeCart = document.getElementById('closeCart');
        const productsGrid = document.getElementById('productsGrid');
        const cartItems = document.getElementById('cartItems');
        const cartCount = document.getElementById('cartCount');
        const cartTotal = document.getElementById('cartTotal');
        const checkoutBtn = document.getElementById('checkoutBtn');
        const categoryBtns = document.querySelectorAll('.category-btn');

        // Create product card HTML
        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card slide-in-element';
            
            let imagesHTML = '';
            product.images.forEach((img, index) => {
                imagesHTML += `<img src="${img}" alt="${product.name}" class="product-image ${index === 0 ? 'active' : ''}">`;
            });

            let navDotsHTML = '';
            product.images.forEach((_, index) => {
                navDotsHTML += `<span class="slider-dot ${index === 0 ? 'active' : ''}" onclick="changeImage(${product.id}, ${index})"></span>`;
            });

            let sliderBtnsHTML = product.images.length > 1 ? `
                <button class="slider-btn prev" onclick="prevImage(${product.id})">‚ùÆ</button>
                <button class="slider-btn next" onclick="nextImage(${product.id})">‚ùØ</button>
            ` : '';

            card.innerHTML = `
                <div class="product-slider" id="slider-${product.id}" onclick="openProductModal(${product.id})">
                    ${imagesHTML}
                    ${sliderBtnsHTML}
                    <div class="slider-nav">${navDotsHTML}</div>
                    <div class="product-overlay">
                        <span class="product-overlay-price">${product.price}</span>
                        <span class="product-overlay-category">${product.category}</span>
                    </div>
                </div>
                <div class="product-info">
                    <span class="product-category">${product.category}</span>
                    <h3 class="product-name">${product.name}</h3>
                    <p class="product-description">${product.description}</p>
                    <div class="product-price">${product.price}</div>
                    <button class="btn-add-cart" onclick="addToCart(${product.id})">
                        <i class="fas fa-plus"></i> Agregar
                    </button>
                </div>
            `;
            return card;
        }

        // CARGAR PRODUCTOS
        function loadProducts(filter = 'todos') {
            productsGrid.innerHTML = '';
            const filtered = filter === 'todos' ? products : products.filter(p => p.category === filter);
            
            filtered.forEach(product => {
                const card = createProductCard(product);
                productsGrid.appendChild(card);
            });
            
            // Activar animaciones de scroll
            setTimeout(() => {
                document.querySelectorAll('.slide-in-element').forEach(el => {
                    el.classList.add('visible');
                });
            }, 100);
        }

        // CONTROLAR SLIDER
        function nextImage(productId) {
            changeToImage(productId, 1);
        }

        function prevImage(productId) {
            changeToImage(productId, -1);
        }

        function changeToImage(productId, direction) {
            const product = products.find(p => p.id === productId);
            const slider = document.getElementById(`slider-${productId}`);
            const images = slider.querySelectorAll('.product-image');
            const dots = slider.querySelectorAll('.slider-dot');
            
            let currentIndex = 0;
            images.forEach((img, index) => {
                if (img.classList.contains('active')) currentIndex = index;
            });

            const newIndex = (currentIndex + direction + images.length) % images.length;
            
            images.forEach(img => img.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            images[newIndex].classList.add('active');
            dots[newIndex].classList.add('active');
        }

        function changeImage(productId, imageIndex) {
            const slider = document.getElementById(`slider-${productId}`);
            const images = slider.querySelectorAll('.product-image');
            const dots = slider.querySelectorAll('.slider-dot');
            
            images.forEach(img => img.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            images[imageIndex].classList.add('active');
            dots[imageIndex].classList.add('active');
        }

        // AGREGAR AL CARRITO
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.images[0],
                    quantity: 1
                });
            }

            updateCart();
            showCartNotification();
        }

        // ACTUALIZAR CARRITO
        function updateCart() {
            cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            renderCart();
            calculateTotal();
        }

        // RENDERIZAR CARRITO
        function renderCart() {
            cartItems.innerHTML = '';

            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-cart"><i class="fas fa-shopping-bag"></i><p>El carrito est√° vac√≠o</p></div>';
                return;
            }

            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">${item.price}</div>
                        <div class="cart-item-quantity">
                            <button class="qty-btn" onclick="decreaseQuantity(${item.id})">‚àí</button>
                            <span>${item.quantity}</span>
                            <button class="qty-btn" onclick="increaseQuantity(${item.id})">+</button>
                        </div>
                    </div>
                    <button class="remove-item" onclick="removeFromCart(${item.id})"><i class="fas fa-trash"></i></button>
                    <button class="copy-image-btn" onclick="copyImageToClipboard('${item.image}')" title="Copiar imagen"><i class="fas fa-image"></i></button>
                `;
                cartItems.appendChild(cartItem);
            });
        }

        // CALCULAR TOTAL
        function calculateTotal() {
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotal.textContent = `${total}`;
        }

        // AUMENTAR CANTIDAD
        function increaseQuantity(productId) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity++;
                updateCart();
            }
        }

        // DISMINUIR CANTIDAD
        function decreaseQuantity(productId) {
            const item = cart.find(item => item.id === productId);
            if (item && item.quantity > 1) {
                item.quantity--;
                updateCart();
            } else if (item && item.quantity === 1) {
                removeFromCart(productId);
            }
        }

        // ELIMINAR DEL CARRITO
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCart();
        }

        // COPIAR IMAGEN AL PORTAPAPELES
        function copyImageToClipboard(imagePath) {
            const img = new Image();
            img.crossOrigin = 'anonymous';
            img.onload = function() {
                const canvas = document.createElement('canvas');
                canvas.width = img.width;
                canvas.height = img.height;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0);
                canvas.toBlob(function(blob) {
                    navigator.clipboard.write([
                        new ClipboardItem({ 'image/png': blob })
                    ]).then(function() {
                        showCopyNotification();
                    }).catch(function(err) {
                        console.error('Error al copiar imagen:', err);
                        // Fallback: copiar la URL de la imagen
                        copyToClipboard(imagePath);
                    });
                });
            };
            img.onerror = function() {
                // Si no se puede cargar la imagen, copiar la URL
                copyToClipboard(imagePath);
            };
            img.src = imagePath;
        }

        // COPIAR TEXTO AL PORTAPAPELES
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                showCopyNotification();
            }).catch(function(err) {
                console.error('Error al copiar:', err);
            });
        }

        // MOSTRAR NOTIFICACI√ìN DE COPIA
        function showCopyNotification() {
            // Eliminar notificaci√≥n anterior si existe
            const existingNotification = document.querySelector('.copy-notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            const notification = document.createElement('div');
            notification.className = 'copy-notification';
            notification.innerHTML = '<i class="fas fa-check"></i> Imagen copiada al portapapeles';
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideUp 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // NOTIFICACI√ìN
        function showCartNotification() {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: var(--success);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                z-index: 10000;
                animation: slideDown 0.3s ease-out;
            `;
            notification.innerHTML = '<i class="fas fa-check"></i> Agregado al carrito';
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideUp 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // ABRIR/CERRAR CARRITO
        cartIcon.addEventListener('click', () => {
            cartModal.classList.toggle('active');
        });

        closeCart.addEventListener('click', () => {
            cartModal.classList.remove('active');
        });

        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) {
                cartModal.classList.remove('active');
            }
        });

        // CHECKOUT CON WHATSAPP
        checkoutBtn.addEventListener('click', () => {
            if (cart.length === 0) {
                alert('El carrito est√° vac√≠o');
                return;
            }

            let mensaje = 'üõí *Pedido LeskChamps*\n\n';
            let total = 0;

            cart.forEach(item => {
                const subtotal = item.price * item.quantity;
                total += subtotal;
                mensaje += `üì∏ *${item.name}*\n`;
                mensaje += `üíµ Precio: ${item.price} | Cantidad: ${item.quantity}\n`;
                mensaje += `-------------------\n`;
            });

            mensaje += `\nüí∞ *TOTAL: ${total}*\n\n`;
            mensaje += '¬øPueden confirmar disponibilidad?';

            const numeroWhatsapp = '59892037792';
            const urlWhatsapp = `https://wa.me/${numeroWhatsapp}?text=${encodeURIComponent(mensaje)}`;

            window.open(urlWhatsapp, '_blank');
        });

        // FILTRAR POR CATEGOR√çA
        categoryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                categoryBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                loadProducts(currentFilter);
            });
        });

        // MODAL DE PRODUCTO AMPLIADO
        const productModal = document.getElementById('productModal');
        const modalClose = document.getElementById('modalClose');
        const modalCloseBtn = document.getElementById('modalCloseBtn');
        const modalImageContainer = document.getElementById('modalImageContainer');
        const modalDots = document.getElementById('modalDots');
        const modalCategory = document.getElementById('modalCategory');
        const modalName = document.getElementById('modalName');
        const modalDescription = document.getElementById('modalDescription');
        const modalPrice = document.getElementById('modalPrice');
        const modalAddBtn = document.getElementById('modalAddBtn');

        let currentModalProduct = null;
        let currentModalImageIndex = 0;

        function openProductModal(productId) {
            currentModalProduct = products.find(p => p.id === productId);
            currentModalImageIndex = 0;

            // Llenar informaci√≥n del modal
            modalCategory.textContent = currentModalProduct.category;
            modalName.textContent = currentModalProduct.name;
            modalDescription.textContent = currentModalProduct.description;
            modalPrice.textContent = `${currentModalProduct.price}`;

            // Crear im√°genes
            modalImageContainer.innerHTML = '';
            currentModalProduct.images.forEach((img, index) => {
                const imgElement = document.createElement('img');
                imgElement.src = img;
                imgElement.alt = currentModalProduct.name;
                imgElement.className = `modal-image ${index === 0 ? 'active' : ''}`;
                modalImageContainer.appendChild(imgElement);
            });

            // Agregar botones de navegaci√≥n si hay m√∫ltiples im√°genes
            if (currentModalProduct.images.length > 1) {
                const prevBtn = document.createElement('button');
                prevBtn.className = 'modal-nav-btn prev';
                prevBtn.innerHTML = '‚ùÆ';
                prevBtn.onclick = (e) => {
                    e.stopPropagation();
                    prevModalImage();
                };
                modalImageContainer.appendChild(prevBtn);

                const nextBtn = document.createElement('button');
                nextBtn.className = 'modal-nav-btn next';
                nextBtn.innerHTML = '‚ùØ';
                nextBtn.onclick = (e) => {
                    e.stopPropagation();
                    nextModalImage();
                };
                modalImageContainer.appendChild(nextBtn);
            }

            // Crear dots
            modalDots.innerHTML = '';
            currentModalProduct.images.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.className = `modal-dot ${index === 0 ? 'active' : ''}`;
                dot.onclick = () => changeModalImage(index);
                modalDots.appendChild(dot);
            });

            // Actualizar bot√≥n de agregar
            modalAddBtn.onclick = () => {
                addToCart(currentModalProduct.id);
                productModal.classList.remove('active');
            };

            // Mostrar modal
            productModal.classList.add('active');
        }

        function prevModalImage() {
            currentModalImageIndex = (currentModalImageIndex - 1 + currentModalProduct.images.length) % currentModalProduct.images.length;
            changeModalImage(currentModalImageIndex);
        }

        function nextModalImage() {
            currentModalImageIndex = (currentModalImageIndex + 1) % currentModalProduct.images.length;
            changeModalImage(currentModalImageIndex);
        }

        function changeModalImage(index) {
            const images = modalImageContainer.querySelectorAll('.modal-image');
            const dots = modalDots.querySelectorAll('.modal-dot');

            images.forEach(img => img.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));

            images[index].classList.add('active');
            dots[index].classList.add('active');
            currentModalImageIndex = index;
        }

        // Cerrar modal
        modalClose.addEventListener('click', () => {
            productModal.classList.remove('active');
        });

        modalCloseBtn.addEventListener('click', () => {
            productModal.classList.remove('active');
        });

        productModal.addEventListener('click', (e) => {
            if (e.target === productModal) {
                productModal.classList.remove('active');
            }
        });

        // Cerrar modal con tecla ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && productModal.classList.contains('active')) {
                productModal.classList.remove('active');
            }
        });

        // CARGAR PRODUCTOS AL INICIAR
        loadProducts();
    </script>
</body>
</html>
